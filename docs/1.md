# 理论（Theory）

## 1. 虚拟存储器（Virtual Memory）

- ### 1.1 虚拟存储器的基本概念
虚拟存储器将主存和辅存的地址空间统一编址，形成一个庞大的地址空间，在这个空间内，用户可以自由编程，而不必在乎实际的主存容量和程序在主存中实际的存放位置。

- ### 1.2 虚拟存储器的分类

	- #### 页式虚拟存储器
		以页为基本单位的虚拟存储器成为页式虚拟存储器。

		>
		> - 虚拟空间与主存空间都被划分成同样大小的页，主存的页称为实页，虚存的页称为续页。
		> - 把虚拟地址分为两个字段；虚页号和页内地址。
		> - 

	- #### 段式虚拟存储器
		段式虚拟存储器中的段是按程序的逻辑结构划分的，各个段的长度因程序而异。

	- #### 段页式虚拟存储器
		把程序按逻辑结构分段，每段再划分为固定的页，主存空间也划分为大小相等的页，程序对主存的调入，调出仍以页为基本传送单位，这样的虚拟存储器称为段页式存储器。	

- ### 1.3 快表TLB

	- #### 1.3.1 概述
		TLB(Translation Lookaside Buffer)转换检测缓冲区是一个内存管理单元,用于改进虚拟地址到物理地址转换速度的缓存。
		TLB是一个小的，虚拟寻址的缓存，其中每一行都保存着一个由单个PTE(Page Table Entry,页表项)组成的块。如果没有TLB，则每次取数据都需要两次访问内存，即查页表获得物理地址和取数据。

## 2. 高速缓冲器（Cache）

- ### 2.1 Cache的基本概念
	高速缓冲技术就是利用程序访问的局部性原理，把程序中正在使用的部分存放在一个高速的，容量较小的Cache中，使CPU的访存操作大多数针对Cache进行，从而使得程序的执行速度大大提高。

	```
	程序访问的局部性原理：程序访问的局部性原理包括时间局部性和空间局部性。前者是指在最近的未来要使用到的信息，很可能是现在正在使用的信息，这是因为程序在循环。后者是指在最近的未来要用到的信息，很可能与现在正在使用的信息在存储空间上是临近的，这是因为指令通常是顺序存放，顺序执行的，数据一般也是以向量、数组、表等形式族聚地存储在一起的。
	```

- ### 2.2 Cache的基本工作原理


- ### 2.3 Cache和主存的映射

	- #### 概述
		在Cache中，地址映射是指把主存地址空间映射到Cache地址空间，也就是把存放在主存中的恒旭按照某种规则装入Cache中。

	- #### 映射方法

		- ##### 直接映射

		- ##### 全相联映射

		- ##### 组相联映射

- ### 2.4 Cache中主存块的替换

	- #### 概述

	- #### 替换算法

		- ##### 随机算法

		- ##### 先进先出算法

		- ##### 近期最少使用算法

		- ##### 最不经常使用算法

- ### 2.5 Cache和主存的一致性

	- #### 概述
	因为 Cache 中的内容是主存块副本，当对Cache中的内容进行更新时，就需要选用写操作策略使Cache内容和主存内容保持一致。主要有两种写操作策略：全写法和写回法。

	- #### 写策略

		- ##### 全写法（写直通法）

		- ##### 写回法

